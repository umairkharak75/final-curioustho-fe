(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{ih9o:function(t,e,s){"use strict";s.d(e,"a",(function(){return Q}));var i=s("AytR"),o=s("fXoL"),a=s("0IaG");let n=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Gb({type:t,selectors:[["app-confirmation-modal"]],decls:10,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","","mat-dialog-close",""]],template:function(t,e){1&t&&(o.Rb(0,"h1",0),o.xc(1,"Delete Confirmation"),o.Qb(),o.Rb(2,"div",1),o.Rb(3,"p"),o.xc(4,"Are you sure to delete this post?"),o.Qb(),o.Qb(),o.Rb(5,"div",2),o.Rb(6,"button",3),o.xc(7,"Confirm delete"),o.Qb(),o.Rb(8,"button",4),o.xc(9,"Cancel"),o.Qb(),o.Qb()),2&t&&(o.Ab(6),o.ec("mat-dialog-close","delete"))},directives:[a.f,a.d,a.b,a.c],styles:[""]}),t})();var c=s("wd/R"),b=s("tyNb"),r=s("8weN"),d=s("x6dr"),l=s("ofXK"),u=s("5RNC"),p=s("3Pt+");function h(t,e){1&t&&(o.Rb(0,"button",17),o.Nb(1,"i",18),o.Qb())}function m(t,e){if(1&t&&(o.Rb(0,"h1"),o.xc(1),o.Qb()),2&t){const t=o.bc();o.Ab(1),o.yc(t.post.description)}}function v(t,e){if(1&t){const t=o.Sb();o.Rb(0,"mat-slider",19,20),o.Yb("change",(function(e){return o.oc(t),o.bc().reviewValue(e)}))("mouseup",(function(){o.oc(t);const e=o.lc(1);return o.bc().onDropReview(e.value)}))("ngModelChange",(function(e){return o.oc(t),o.bc().value=e})),o.Qb()}if(2&t){const t=o.bc();o.ec("disabled",t.disabled)("invert",t.invert)("max",t.max)("min",t.min)("step",t.step)("thumbLabel",t.thumbLabel)("tickInterval",t.getSliderTickInterval())("vertical",t.vertical)("ngModel",t.value)("disabled",!0===t.hasSubmit)}}function f(t,e){1&t&&(o.Rb(0,"button",17),o.Nb(1,"i",18),o.Qb())}function g(t,e){if(1&t){const t=o.Sb();o.Rb(0,"div",2),o.Rb(1,"div",3),o.Yb("click",(function(){o.oc(t);const s=e.$implicit;return o.bc(2).routeToProfileByComment(s.user)})),o.Qb(),o.Rb(2,"h5"),o.xc(3),o.Qb(),o.Rb(4,"p"),o.xc(5),o.Qb(),o.wc(6,f,2,0,"button",4),o.Rb(7,"div",5),o.Rb(8,"div",6),o.Rb(9,"div",7),o.Rb(10,"div",8),o.Rb(11,"button",9),o.xc(12," Report Inappropriate "),o.Qb(),o.Rb(13,"button",10),o.Yb("click",(function(){return o.oc(t),o.bc(2).deletePost()})),o.xc(14," Delete "),o.Qb(),o.Rb(15,"button",9),o.xc(16,"Go to post"),o.Qb(),o.Rb(17,"button",9),o.xc(18,"Cancel"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb()}if(2&t){const t=e.$implicit,s=o.bc(2);o.Ab(1),o.uc("background: url('",t.profilePic,"');"),o.Ab(2),o.yc(t.name),o.Ab(2),o.yc(t.review),o.Ab(1),o.ec("ngIf",s.user.id===s.postUserId)}}function R(t,e){if(1&t&&(o.Rb(0,"div"),o.wc(1,g,19,6,"div",21),o.Qb()),2&t){const t=o.bc();o.Ab(1),o.ec("ngForOf",t.post.comments)}}let Q=(()=>{class t{constructor(t,e,s,a){this.router=t,this.dialog=e,this.postService=s,this.sharedDataService=a,this.deletedPost=new o.n,this.autoTicks=!1,this.disabled=!1,this.invert=!1,this.max=100,this.min=0,this.showTicks=!1,this.step=1,this.thumbLabel=!0,this.value=0,this.vertical=!1,this.tickInterval=1,this.backendUrl=i.a.backEndUrl,this.hasSubmit=!1}getSliderTickInterval(){return this.showTicks?this.autoTicks?"auto":this.tickInterval:0}ngOnInit(){console.log(this.post),this.postUserId="string"==typeof this.post.user?this.post.user:this.post.user._id,this.post.comments&&(this.totalReviews=this.post.comments.length),this.post.user&&this.post.user.profilePic&&(this.postProfilePic=this.post.user.profilePic,this.postUserName=this.post.user.name),this.setPostReviewsValue(),this.formatDate()}reviewValue(t){this.value=t.value}onDropReview(t){this.hasSubmit||(console.log(t),this.value=t,this.postService.postReview("api/posts/review/"+this.post._id,{review:this.value}).subscribe(t=>{this.hasSubmit=!0;const e={date:new Date,name:this.user.name,review:this.value,user:this.user.id,profilePic:this.user.profielPic};this.post.comments.push(e),this.postService.addPost(this.user._id),this.postService.getAddedPost().subscribe(t=>{})}))}setPostReviewsValue(){const t=JSON.parse(this.sharedDataService.getUser());this.post.comments&&this.post.comments.forEach(e=>{e.user===t.id&&(this.value=e.review,this.hasSubmit=!0)})}routeToProfile(){console.log(this.post),this.router.navigateByUrl("profile/"+this.post.user._id)}routeToProfileByComment(t){this.router.navigateByUrl("profile/"+t)}deletePost(){this.dialog.open(n,{width:"250px"}).afterClosed().subscribe(t=>{"delete"===t&&this.postService.deletePost("api/posts/"+this.post._id).subscribe(t=>{"Post removed"===t.msg&&this.deletedPost.emit(this.post)})})}formatDate(){const t=c(this.post.date);this.post.date=t.format("MM-DD-YYYY")}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(b.b),o.Mb(a.a),o.Mb(r.a),o.Mb(d.a))},t.\u0275cmp=o.Gb({type:t,selectors:[["app-post"]],inputs:{post:"post",user:"user"},outputs:{deletedPost:"deletedPost"},decls:30,vars:11,consts:[[1,"dashboard_indivisual_post_section"],[1,"dashboard_indivisual_post"],[1,"dashboard_post_header_section"],[1,"img",3,"click"],["type","button","data-toggle","modal","id","dashboard_post_menu","data-target","#postmenu1",4,"ngIf"],["id","postmenu1","tabindex","-1","role","dialog","aria-labelledby","postmenuLabel","aria-hidden","true",1,"modal","fade","postmenu"],[1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable",2,"max-width","400px","margin","0 auto"],[1,"modal-content"],[1,"modal-body"],["type","button","data-dismiss","modal"],["type","button","data-dismiss","modal",3,"click"],[1,"dashboard_post_content_section"],[3,"src"],[1,"dashboard_post_footer_section"],["aria-hidden","true",1,"fa","fa-thumbs-o-up"],[4,"ngIf"],["class","example-margin",3,"disabled","invert","max","min","step","thumbLabel","tickInterval","vertical","ngModel","change","mouseup","ngModelChange",4,"ngIf"],["type","button","data-toggle","modal","id","dashboard_post_menu","data-target","#postmenu1"],["aria-hidden","true",1,"fa","fa-ellipsis-h"],[1,"example-margin",3,"disabled","invert","max","min","step","thumbLabel","tickInterval","vertical","ngModel","change","mouseup","ngModelChange"],["slider",""],["class","dashboard_post_header_section",4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Rb(2,"div",2),o.Rb(3,"div",3),o.Yb("click",(function(){return e.routeToProfile()})),o.Qb(),o.Rb(4,"h5"),o.xc(5),o.Qb(),o.wc(6,h,2,0,"button",4),o.Rb(7,"div",5),o.Rb(8,"div",6),o.Rb(9,"div",7),o.Rb(10,"div",8),o.Rb(11,"button",9),o.xc(12," Report Inappropriate "),o.Qb(),o.Rb(13,"button",10),o.Yb("click",(function(){return e.deletePost()})),o.xc(14," Delete "),o.Qb(),o.Rb(15,"button",9),o.xc(16,"Go to post"),o.Qb(),o.Rb(17,"button",9),o.xc(18,"Cancel"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(19,"div",11),o.Nb(20,"img",12),o.Qb(),o.Rb(21,"div",13),o.Nb(22,"i",14),o.Rb(23,"p"),o.xc(24),o.Qb(),o.wc(25,m,2,1,"h1",15),o.Rb(26,"span"),o.xc(27),o.Qb(),o.Qb(),o.Qb(),o.wc(28,v,2,10,"mat-slider",16),o.wc(29,R,2,1,"div",15),o.Qb()),2&t&&(o.Ab(3),o.uc("background: url('",e.postProfilePic,"');"),o.Ab(2),o.yc(e.postUserName),o.Ab(1),o.ec("ngIf",e.user.id===e.postUserId),o.Ab(14),o.fc("src",e.backendUrl+e.post.productImage,o.qc),o.Ab(4),o.zc("Total Reviews ",e.totalReviews,""),o.Ab(1),o.ec("ngIf","null"!==e.post.description),o.Ab(2),o.yc(e.post.date),o.Ab(1),o.ec("ngIf",e.user.id!==e.postUserId),o.Ab(1),o.ec("ngIf",e.post.comments))},directives:[l.j,u.a,p.k,p.n,l.i],styles:[""]}),t})()}}]);